# Retail Data Assistant

BI AI-агент для анализа данных торговой сети с использованием естественного языка.

## Описание проекта

Retail Data Assistant - это MVP интеллектуального агента, который позволяет пользователям получать данные из корпоративного хранилища данных торговой сети продуктов питания посредством запросов на естественном языке. 

Система переводит запросы на естественном языке в SQL-запросы к данным с последующей визуализацией результатов в табличном формате.

## Технологический стек

- **Язык программирования**: Python 3.9+
- **Фреймворк интерфейса**: Streamlit
- **База данных**: DuckDB
- **LLM API**: OpenAI API (GPT-4о mini)
- **Вспомогательные библиотеки**: pandas, numpy, plotly

## Установка и запуск

### Предварительные требования

- Python 3.9 или выше
- Ключ API OpenAI

### Установка

1. Клонируйте репозиторий:
```
git clone [url-репозитория]
cd retail_data_assistant
```

2. Установите зависимости:
```
pip install -r requirements.txt
```

3. Настройте API ключ OpenAI:
   - Переименуйте файл `.streamlit/secrets.toml.example` в `.streamlit/secrets.toml`
   - Добавьте ваш ключ API OpenAI в файл secrets.toml

### Запуск приложения

```
streamlit run app.py
```

После запуска приложение будет доступно по адресу `http://localhost:8501`.

## Структура проекта

```
retail_data_assistant/
├── app.py                      # Основной файл Streamlit приложения
├── llm_processor.py            # Модуль обработки запросов через LLM API
├── metadata/
│   ├── schema.json             # Структура таблиц и полей
│   ├── dictionary.json         # Словарь бизнес-терминов
│   └── query_examples.json     # Примеры типовых запросов
├── data_manager/
│   ├── db_initializer.py       # Создание и инициализация DuckDB
│   ├── query_executor.py       # Выполнение SQL-запросов
│   └── formatter.py            # Форматирование результатов
├── data/
│   └── *.csv                   # Сгенерированные CSV-файлы с данными
├── utils/
│   ├── config.py               # Конфигурация приложения
│   └── logger.py               # Логирование
├── requirements.txt            # Зависимости проекта
└── README.md                   # Документация
```

## Использование

1. Откройте приложение в браузере
2. Введите запрос на естественном языке в поле ввода
3. Нажмите кнопку "Выполнить запрос"
4. Просмотрите сгенерированный SQL-запрос и результаты в табличном формате

### Примеры запросов

- "Покажи топ-10 товаров по продажам за последний месяц"
- "Какие магазины имеют наибольшую выручку в категории 'Молочные продукты'?"
- "Сравни продажи по регионам за первый квартал этого года"
- "Как изменилась средняя маржа по категориям товаров за последние 3 месяца?"
- "Какие товары чаще всего покупают вместе с хлебом?"
- "Покажи динамику продаж мороженого по месяцам за прошлый год"
- "Какие клиенты потратили больше всего в прошлом месяце и что они покупали?"
- "Какие категории товаров приносят наибольшую прибыль в магазинах формата мини-маркет?"
- "Сравни эффективность промо-акций за последний квартал"
- "У каких товаров критический уровень запасов в магазинах Москвы?" 